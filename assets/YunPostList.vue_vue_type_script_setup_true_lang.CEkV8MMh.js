import{u as j,f as B}from"./chunks/vue-router.fX0UCdQ5.js";import{i as D,l as M,_ as A,g as F,q as I}from"./app.D8_-IYO0.js";import"./chunks/dayjs.BdcnXKr1.js";import{y as c,w as z,ac as a,B as o,ab as y,al as w,ah as f,L as C,am as L,a9 as T,aj as P,aa as e,ae as d,ai as E,af as S,a8 as G,A as H,G as q,as as O,av as J,F as Y,P as k,ak as K}from"./framework.53SfwQWC.js";import{b as Q,_ as U,a as W}from"./YunPostMeta.vue_vue_type_style_index_0_lang.Bb0-TtlS.js";import{u as X}from"./post.Db7D0una.js";import{u as Z}from"./chunks/vue-i18n.BEnJbYsC.js";function tt(t){const l=j(),s=c(()=>Number.parseInt(l.params.page||"1")),n=c(()=>Math.ceil(t.total/t.pageSize)),i=c(()=>s.value===1||s.value===n.value?3:2);function m(r){return r===1||r===n.value?!0:r>s.value-i.value&&r<s.value+i.value}function u(r){return r===1?"/":`/page/${r}`}const v=c(()=>u(s.value-1)),_=c(()=>u(s.value+1)),h=c(()=>s.value>1),b=c(()=>s.value<n.value);return{curPage:s,totalPages:n,showPage:m,surLen:i,getTo:u,prevTo:v,nextTo:_,showPrev:h,showNext:b}}const et={class:"pagination"},st=z({__name:"YunPagination",props:{total:{},pageSize:{}},setup(t,{expose:l}){const s=t,{curPage:n,totalPages:i,showPage:m,getTo:u,surLen:v,prevTo:_,nextTo:h,showPrev:b,showNext:r}=tt({total:s.total,pageSize:s.pageSize});return l({curPage:n}),($,g)=>{const x=T("RouterLink");return e(),a("nav",et,[o(b)?(e(),y(x,{key:0,class:"page-number",to:o(_),"aria-label":"prev"},{default:w(()=>[...g[0]||(g[0]=[d("div",{"i-ri-arrow-left-s-line":""},null,-1)])]),_:1},8,["to"])):f("",!0),(e(!0),a(C,null,L(o(i),p=>(e(),a(C,null,[o(m)(p)?(e(),y(x,{key:p,class:P(["page-number",o(n)===p&&"active"]),to:o(u)(p)},{default:w(()=>[E(S(p),1)]),_:2},1032,["class","to"])):p===o(n)-o(v)?(e(),a("span",{key:`prev-space-${p}`,class:"space",disabled:""}," ... ")):p===o(n)+o(v)?(e(),a("span",{key:`next-space-${p}`,class:"space",disabled:""}," ... ")):f("",!0)],64))),256)),o(r)?(e(),y(x,{key:1,class:"page-number",to:o(h),"aria-label":"next"},{default:w(()=>[...g[1]||(g[1]=[d("div",{"i-ri-arrow-right-s-line":""},null,-1)])]),_:1},8,["to"])):f("",!0)])}}}),ot={},at={w:"full",h:"30%",class:"absolute bottom-0 bg-gradient-to-t from-$va-c-bg-light to-transparent z-1"};function nt(t,l){return e(),a("div",at)}const lt=G(ot,[["render",nt]]),rt=z({__name:"ValaxyDynamicComponent",props:{templateStr:{},data:{default:()=>({})}},setup(t){const l=t,s=H(null);async function n(){const m={render:B(l.templateStr),data:()=>l.data};s.value=J(()=>Promise.resolve(m))}return q(()=>[l.templateStr,l.data],()=>{n()},{immediate:!0}),(i,m)=>(e(),y(O(s.value)))}}),ct={class:"flex flex-1 of-hidden justify-start items-start post-card-info",w:"full"},it=["src","alt"],ut={class:"flex-center title text-2xl",text:"center",font:"serif black"},pt={flex:"~ grow col",w:"full",justify:"center",items:"center"},mt={key:0,py:"1"},dt={key:0,class:"markdown-body",op:"90",text:"left",w:"full",p:"x-8 y-2"},ft=["innerHTML"],vt={key:2,m:"b-5"},_t=["href"],gt={w:"full",class:"yun-card-actions flex justify-between p-4","min-h":"10",text:"sm"},yt={class:"post-categories inline-flex",flex:"wrap 1",items:"center"},ht=z({__name:"YunPostCard",props:{post:{}},setup(t){const l=t,{t:s}=Z(),{$tO:n}=D(),{icon:i,styles:m,color:u}=X(l.post.type),v=Y("bg-gradient-to-r gradient-text from-$va-c-primary to-$va-c-primary-lighter"),_=c(()=>u?"":l.post.postTitleClass||v.value);return(h,b)=>{const r=A,$=Q,g=rt,x=lt,p=U,R=W,N=M,V=T("RouterLink");return e(),y(V,{class:"post-card-link flex-center w-full",to:t.post.path||""},{default:w(()=>[k(N,{class:P(["w-full hover:scale-102 hover:z-1",t.post.cover?"post-card-image":"post-card"]),mx:"4",overflow:"hidden",style:K(o(m))},{default:w(()=>[d("div",ct,[t.post.cover?(e(),a("img",{key:0,src:t.post.cover,alt:o(s)("post.cover"),width:"320",height:"180",w:"40%",h:"54",class:"cover object-cover object-center md:shadow",loading:"lazy"},null,8,it)):f("",!0),d("div",{class:P(["flex flex-col items-center relative",t.post.cover&&"h-54"]),w:"full"},[k(r,{class:P(["post-title-link cursor-pointer",_.value]),to:t.post.path||"",m:"t-3"},{default:w(()=>[d("div",ut,[t.post.type?(e(),a("div",{key:0,class:P(["inline-flex",o(i)]),m:"r-1"},null,2)):f("",!0),d("span",null,S(o(n)(t.post.title)),1)])]),_:1},8,["to","class"]),k($,{frontmatter:t.post},null,8,["frontmatter"]),d("div",pt,[t.post.excerpt_type==="text"?(e(),a("div",mt)):f("",!0),t.post.excerpt?(e(),a(C,{key:1},[t.post.excerpt_type==="html"?(e(),a("div",dt,[k(g,{"template-str":t.post.excerpt},null,8,["template-str"])])):(e(),a("div",{key:1,class:"markdown-body",op:"90",text:"left",w:"full",p:"x-8 y-2",innerHTML:t.post.excerpt},null,8,ft))],64)):(e(),a("div",vt))]),t.post.excerpt?(e(),y(x,{key:0})):f("",!0),t.post.url?(e(),a("a",{key:1,href:t.post.url,class:"post-link-btn shadow hover:shadow-md z-2",rounded:"",target:"_blank",m:"b-4"},S(o(s)("post.view_link")),9,_t)):f("",!0)],2)]),d("div",gt,[d("div",yt,[k(p,{m:"l-1",categories:t.post.categories},null,8,["categories"])]),t.post.tags?(e(),y(R,{key:0,m:"1",tags:t.post.tags},null,8,["tags"])):f("",!0)])]),_:1},8,["class","style"])]),_:1},8,["to"])}}}),xt={flex:"~ col",class:"yun-post-list gap-4 items-center",w:"full",p:"x-4 lt-sm:0"},kt={key:0,py2:"",op50:"","text-center":""},Lt=z({__name:"YunPostList",props:{type:{},posts:{}},setup(t){const l=t,s=Y(),n=c(()=>s.value?.curPage||1),i=F(),m=I(),u=c(()=>m.value.pageSize),v=c(()=>(l.posts||i.postList).filter(h=>!h.hide)),_=c(()=>v.value.slice((n.value-1)*u.value,n.value*u.value));return(h,b)=>{const r=ht,$=st;return e(),a(C,null,[d("div",xt,[_.value.length?f("",!0):(e(),a("div",kt," 博主还什么都没写哦～ ")),(e(!0),a(C,null,L(_.value,(g,x)=>(e(),y(r,{key:x,post:g},null,8,["post"]))),128))]),k($,{ref_key:"paginationRef",ref:s,class:"mt-5",total:v.value.length,"page-size":u.value},null,8,["total","page-size"])],64)}}});export{Lt as _};
